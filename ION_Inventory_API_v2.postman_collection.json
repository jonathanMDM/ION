{
    "info": {
        "_postman_id": "ion-inventory-api-v2",
        "name": "ION Inventory API v2",
        "description": "API REST completa para ION Inventory System\n\nBase URL: https://ion-app-120e60a9275c.herokuapp.com/api/v2\n\nAutenticación: Bearer Token (Sanctum)\n\nDocumentación: API_DOCUMENTATION.md",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Login successful\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Token is present\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.data.token).to.exist;",
                                    "});",
                                    "",
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.environment.set(\"token\", jsonData.data.token);",
                                    "    console.log(\"✅ Token guardado:\", jsonData.data.token.substring(0, 20) + \"...\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "login"]
                        },
                        "description": "Login y obtener token de autenticación"
                    },
                    "response": []
                },
                {
                    "name": "Get Current User",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/user",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "user"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Refresh Token",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.environment.set(\"token\", jsonData.data.token);",
                                    "    console.log(\"✅ Token refrescado\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/refresh",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "refresh"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Logout",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    pm.environment.unset(\"token\");",
                                    "    console.log(\"✅ Token eliminado\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/logout",
                            "host": ["{{base_url}}"],
                            "path": ["auth", "logout"]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Assets",
            "item": [
                {
                    "name": "Get Assets",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/assets?page=1&per_page=15",
                            "host": ["{{base_url}}"],
                            "path": ["assets"],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1"
                                },
                                {
                                    "key": "per_page",
                                    "value": "15"
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "disabled": true
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Asset by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/assets/1",
                            "host": ["{{base_url}}"],
                            "path": ["assets", "1"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Asset",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 201) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.environment.set(\"last_created_asset_id\", jsonData.data.id);",
                                    "    console.log(\"✅ Activo creado con ID:\", jsonData.data.id);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Laptop Dell Latitude 5420\",\n  \"code\": \"ASSET-{{$timestamp}}\",\n  \"category_id\": 1,\n  \"location_id\": 1,\n  \"serial_number\": \"SN{{$randomInt}}\",\n  \"model\": \"Latitude 5420\",\n  \"brand\": \"Dell\",\n  \"purchase_date\": \"2024-01-15\",\n  \"purchase_price\": 1200.00,\n  \"status\": \"available\",\n  \"description\": \"Laptop para desarrollo\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/assets",
                            "host": ["{{base_url}}"],
                            "path": ["assets"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Asset",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"status\": \"in_use\",\n  \"location_id\": 2,\n  \"description\": \"Activo actualizado mediante API\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/assets/{{last_created_asset_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["assets", "{{last_created_asset_id}}"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Delete Asset",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/assets/{{last_created_asset_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["assets", "{{last_created_asset_id}}"]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Categories",
            "item": [
                {
                    "name": "Get Categories",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/categories",
                            "host": ["{{base_url}}"],
                            "path": ["categories"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Category",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Electrónica\",\n  \"description\": \"Dispositivos electrónicos\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/categories",
                            "host": ["{{base_url}}"],
                            "path": ["categories"]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Locations",
            "item": [
                {
                    "name": "Get Locations",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/locations",
                            "host": ["{{base_url}}"],
                            "path": ["locations"]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Location",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Oficina Principal\",\n  \"address\": \"Calle 123, Ciudad\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/categories",
                            "host": ["{{base_url}}"],
                            "path": ["locations"]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Maintenances",
            "item": [
                {
                    "name": "Get Maintenances",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/maintenances",
                            "host": ["{{base_url}}"],
                            "path": ["maintenances"],
                            "query": [
                                {
                                    "key": "asset_id",
                                    "value": "1",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "pending",
                                    "disabled": true
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Maintenance",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"asset_id\": 1,\n  \"type\": \"preventive\",\n  \"scheduled_date\": \"2024-12-20\",\n  \"description\": \"Mantenimiento preventivo mensual\",\n  \"cost\": 50.00\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/maintenances",
                            "host": ["{{base_url}}"],
                            "path": ["maintenances"]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Users",
            "item": [
                {
                    "name": "Get Users",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/users",
                            "host": ["{{base_url}}"],
                            "path": ["users"]
                        },
                        "description": "Solo para usuarios con rol admin o superadmin"
                    },
                    "response": []
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "https://ion-app-120e60a9275c.herokuapp.com/api/v2"
        }
    ]
}
